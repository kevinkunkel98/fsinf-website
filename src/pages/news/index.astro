---
import { getCollection } from "astro:content";
import BaseHead from "../../components/BaseHead.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import NewsElement from "../../components/NewsElement.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../../consts";

const newsItems = (await getCollection("news")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<!doctype html>
<html lang="de">
  <head>
    <BaseHead title={`News - ${SITE_TITLE}`} description={SITE_DESCRIPTION} />
  </head>
  <body>
    <Header />
    <main class="w-100 m-auto p-4 md:w-5/6 lg:w-[960px]">
      <section>
        <h1>News</h1>
        <div
          class="m-0 grid h-auto w-full list-none grid-flow-row grid-cols-1 justify-center gap-8 p-0 sm:grid-cols-2"
        >
          {
            newsItems.map((item) => (
              <NewsElement
                slug={item.slug}
                heroImage={item.data.heroImage}
                title={item.data.title}
                description={item.data.description}
                pubDate={item.data.pubDate}
              />
            ))
          }
        </div>
      </section>
    </main>
    <Footer />
  </body>
</html>
